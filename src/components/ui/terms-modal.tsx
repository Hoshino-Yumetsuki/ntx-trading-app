"use client";

import { X } from "lucide-react";
import { useLanguage } from "@/src/contexts/language-context";

interface TermsModalProps {
  isOpen: boolean;
  onClose: () => void;
  type: "terms" | "privacy";
}

export function TermsModal({ isOpen, onClose, type }: TermsModalProps) {
  const { t } = useLanguage();

  if (!isOpen) return null;

  const title = type === "terms" ? t("ui.terms.title") : t("ui.privacy.title");

  const termsContent = `
服务条款

为使用NTX平台及服务（以下简称"NTX"），您应当阅读并遵守《NTX用户协议》（以下简称"本协议"）。请您务必审慎阅读，充分理解各条款内容，特别是免除或者限制责任的条款，以及开通或使用某项服务的单独协议，并选择接受或不接受。限制、免责条款可能以加粗形式提示您注意。

除非您已阅读并接受本协议所有条款，否则您无权下载、安装或使用NTX及相关服务。您的下载、安装、登录等使用行为即视为您已阅读并同意上述协议的约束。如果您未满18周岁，请在法定监护人的陪同下阅读本协议及其他上述协议，并特别注意未成年人使用条款。

一、协议的范围
本协议是您与NTX之间关于您下载、安装、使用、复制NTX，以及使用NTX相关服务所订立的协议。

二、关于本服务
本服务内容是指NTX客户端平台提供包括但不限于iOS及Android等多个版本，您必须选择与所安装手机相匹配的平台版本。

三、平台的获取
您可以直接从NTX授权的第三方获取。

如果您从未经NTX授权的第三方获取NTX或与NTX名称相同的安装程序，NTX无法保证该平台能够正常使用，并对因此给您造成的损失不予负责。下载安装程序后，您需要按照该程序提示的步骤正确安装。

为提供更加优质、安全的服务，在NTX安装时NTX可能推荐您安装其他平台，您可以选择安装或不安装。

如果您不再需要使用NTX或者需要安装新版NTX，可以自行卸载。

四、平台的更新
为了改善用户体验、完善服务内容，NTX将不断努力开发新的服务，并为您不时提供平台更新（这些更新可能会采取平台替换、修改、功能强化、版本升级等形式）。

为了保证NTX及服务的安全性和功能的一致性，NTX有权不向您特别通知而对平台进行更新，或者对平台的部分功能效果进行改变或限制。

NTX新版本发布后，旧版本的平台可能无法使用，NTX不保证旧版NTX继续可用及相应的服务，请您随时核对并下载最新版本。

五、用户个人信息保护
保护用户个人信息是NTX的一项基本原则，NTX将会采取合理的措施保护用户的信息。除法律法规规定的情形外，未经用户许可NTX不会向第三方公开、透露用户个人信息。为了向用户提供相关服务功能或改善技术和服务，您在注册账号或使用本服务的过程中，可能需要提供一些必要信息，NTX对相关信息采用国际化标准的加密存储与传输方式，保障用户个人信息的安全。

未经您的同意，NTX不会向NTX以外的任何公司、组织和个人披露您的个人信息，但法律法规另有规定的除外。

NTX非常重视对未成年人个人信息的保护。若您是18周岁以下的未成年人，在使用NTX的服务前，应事先取得您家长或法定监护人的书面同意。

六、主权力义务条款
NTX特别提醒您应妥善保管您的账号，当您使用完毕后，应安全退出。

用户注意事项：您理解并同意，为了向您提供有效的服务，您在此许可NTX利用您移动通讯终端设备的处理器和宽带等资源。NTX使用过程中可能产生的数据流量的费用，您需自行向运营商了解相关资费信息。

七、用户行为规范
您在使用本服务时需遵守法律法规、社会主义制度、国家利益、公民合法权利、社会公共秩序、道德风尚及信息真实性等"七条底线"要求。

八、平台使用规范
除非法律允许或NTX的书面许可，您使用NTX过程中不得删除NTX及其副本上关于知识产权的信息，不得对NTX进行反向工程等或以其他方式尝试发现NTX的源代码。

九、对自己行为负责
您充分了解并同意，您必须为自己注册账号下的一切行为负责。

十、其他
您使用NTX即视为您已阅读并同意受NTX协议约束。NTX有权在必要时修改本协议条款。如果您不接受修改后的条款，应当停止使用NTX。
  `;

  const privacyContent = `
隐私政策

NTX保护所有用户的个人隐私权。我们将按照本隐私权政策的规定收集、使用或披露您的个人信息。同时，我们会通过本政策向您说明，我们如何为您提供访问、更新、控制和保护您信息的服务。您使用或继续使用我们的服务，即意味着同意我们按照隐私政策收集、使用、储存和分享您的相关信息。如对本政策或相关事宜有任何问题，请通过客服与我们联系。

I. 我们可能收集的信息
我们或我们的第三方合作伙伴，可能通过cookies收集和使用您的信息，并将该等信息储存为日志信息。我们使用自己的cookies，目的是为您提供更个性化的用户体验和服务，并用于以下用途：

您的用户名、电子邮件地址和联系偏好设定。这使我们能够为您创建帐户，为您提供方便和个性化的帐户访问体验，并提供和支持服务。这些信息也有助于我们就您对服务的使用、产品公告、软件更新等与您进行沟通，并响应您的协助请求（包括在您访问帐户遇到困难时提供帐户验证支持）。

设备或软件信息，例如您的移动设备、网页浏览器或用于接入我们服务的其他程序所提供的配置信息、您的移动设备所用的版本和设备硬件信息。我们收集这些信息是为了帮助我们提供和支持服务，包括对您使用本软件服务的体验进行本地化处理。此外，还有助于我们更加了解用户是如何使用服务的。

您使用的NTX产品和服务的信息。这些信息将帮助我们提供和支持服务，并响应您的协助请求。我们收集这些信息也是为了更好地了解用户如何使用服务。

您在帐户上添加的任何内容。我们仅为确保您在使用服务时可以获取这些信息而使用这些信息。

收集此类信息可以帮助我们管理服务，提供方便和个性化的用户访问体验，提高我们的产品和服务的功能和可用性，分析用户使用服务的趋势和信息，收集服务在特定领域的使用和发展信息，并评估软件的内容和结构。我们不会为了向您发送任何有针对性的广告而收集您的信息，也不会追踪您对任何第三方网站的访问。

II. 我们可能如何收集信息
我们或我们的第三方合作伙伴，可能通过cookies收集和使用您的信息，并将该等信息储存为日志信息。我们使用自己的cookies，目的是为您提供更个性化的用户体验和服务，并用于以下用途：

记住您的身份。例如：有助于我们辨认您作为我们的注册用户的身份，或保存您向我们提供的有关您的偏好或其他信息；

分析您使用我们服务的情况。例如，我们可利用cookies来了解您使用我们的服务进行什么活动，或哪些网页或服务最受您的欢迎；

我们或我们的第三方合作伙伴可能通过后台网络请求，上报您的软件使用习惯和使用过程中产生的错误日志，用来改善软件服务。我们会通过询问的方式，得到您的许可后上传软件使用过程中产生的错误日志，用来改善软件服务。

III. 我们可能如何使用信息
我们可能将在向您提供服务的过程之中所收集的信息用作下列用途：

向您提供更精准的服务；

在我们提供服务时，用于身份验证、客户服务、安全防范、诈骗监测、存档和备份用途，确保我们向您提供的产品和服务的安全性；

帮助我们设计新服务，改善我们现有服务；

使我们更加了解您如何接入和使用我们的服务，从而针对性地回应您的个性化需求，例如语言设定、位置设定、个性化的帮助服务和指示，或对您和其他用户作出其他方面的回应；

软件认证或管理软件升级；

让您参与有关我们产品和服务的调查。

为了让您有更好的体验、改善我们的服务或您同意的其他用途，在符合相关法律法规的前提下，我们可能将通过某一项服务所收集的信息，以汇集信息或者个性化的方式，用于我们的其他服务。例如，在您使用我们的一项服务时所收集的信息，可能在另一服务中用于向您提供特定内容，或向您展示与您相关的、非普遍推送的信息。如果我们在相关服务中提供了相应选项，您也可以授权我们将该服务所提供和储存的信息用于我们的其他服务。

IV. 信息访问，披露和删除
我们仅在本《隐私政策》所述目的所必需的期间和法律法规要求的时限内保留您的个人信息。我们不会出售或出租用户信息，我们仅在下列情况下披露信息：

您明确同意我们分享信息。

在遵守严格的数据保护要求的前提下，我们需要与为我们处理数据的关联和非关联服务提供商共享您的信息。

我们需要与关联和非关联服务提供商共享您的信息以便满足您的产品或服务要求。

我们认为有必要调查对我们的服务条款的潜在违反情况，以贯彻这些服务条款，或者我们认为有必要就针对人身、财产或我们运营服务所用系统的非法活动、涉嫌欺诈的行为或潜在威胁进行调查、预防或采取行动。

我们认定访问、保存或披露信息，是为了保护服务用户的权利、财产或人身安全而依法要求或允许的，或者是为了遵守适用法律而要求的，包括遵守令状、法院指令或其他法律程序的要求。

在适用法律允许的前提下，出于出售或重组全部或部分业务之目的，我们需要分享您的信息。

配合我们的服务使用的一些第三方应用程序和服务可能会要求获得访问您的内容或其他帐户信息的权限。为了获得该等访问权限或信息，这些应用程序将通知您并征求您的同意。请谨慎考虑您对此类应用程序及服务的选择和您的许可。我们鼓励您阅读各方的用户协议和隐私政策。

您可以通过拨打首页的客服电话来注销帐户，注销帐户后，我们将停止为您提供产品或服务，并根据您的要求删除您的个人信息。在以下情形下，您可以向我们提出删除个人信息的请求：

如果我们处理个人信息的行为违反法律法规。

如果我们收集、使用您的个人信息，却未征得您的同意。

如果我们处理个人信息的行为违反了与您的约定。

如果您不再使用我们的产品或服务，或您注销了账号。

如果我们不再为您提供产品或服务。

V. 本用户协议和隐私政策是否会变更？
随着业务的发展，我们可能需要更新本政策以适应服务、我们的业务和适用于法律的变化；然而，我们将会一直信守尊重您隐私的承诺。

如果适用法律要求，我们将请求您同意此等变更；在其他情况下，请注意，您在任何变更之后继续使用NTX服务帐户即表示您认可并同意遵守新的用户协议和隐私政策。如果您不同意本政策的任何变更，且不希望您的信息受修订后政策的约束，您需要关闭您的帐户。
  `;

  const content = type === "terms" ? termsContent : privacyContent;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
      <div className="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col">
        <div className="flex items-center justify-between p-6 border-b">
          <h2 className="text-xl font-semibold text-gray-900">{title}</h2>
          <button
            type="button"
            onClick={onClose}
            className="text-gray-400 hover:text-gray-600 transition-colors"
          >
            <X className="h-6 w-6" />
          </button>
        </div>

        <div className="flex-1 overflow-y-auto p-6">
          <div className="prose prose-sm max-w-none">
            <pre className="whitespace-pre-wrap text-sm text-gray-700 leading-relaxed">
              {content}
            </pre>
          </div>
        </div>

        <div className="p-6 border-t bg-gray-50">
          <button
            type="button"
            onClick={onClose}
            className="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            我已阅读并理解
          </button>
        </div>
      </div>
    </div>
  );
}
